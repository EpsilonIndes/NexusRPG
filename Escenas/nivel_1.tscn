[gd_scene load_steps=41 format=3 uid="uid://cjswe57kq821f"]

[ext_resource type="PackedScene" uid="uid://bmocargan5l0q" path="res://Escenas/player.tscn" id="1_a8vtw"]
[ext_resource type="Script" uid="uid://dpb427vjhtg17" path="res://Scripts/InventoryManager.gd" id="2_5j2cu"]
[ext_resource type="PackedScene" uid="uid://dbcn88xgtkshp" path="res://Escenas/Personajes/Miguelito.tscn" id="2_csbrw"]
[ext_resource type="PackedScene" uid="uid://baga8lrftoaue" path="res://Escenas/Personajes/Amanda.tscn" id="3_pg8q4"]
[ext_resource type="PackedScene" uid="uid://dbkl1jxjs2dxk" path="res://Escenas/Personajes/Maya.tscn" id="4_i64u6"]
[ext_resource type="PackedScene" uid="uid://ecyr37wcvpst" path="res://Escenas/UserUI/canvas_layer.tscn" id="4_j23ur"]
[ext_resource type="PackedScene" uid="uid://ckhl1sgngkvhd" path="res://Escenas/Personajes/Sigrid.tscn" id="5_oduvb"]
[ext_resource type="PackedScene" uid="uid://ddbnhhajofjkw" path="res://Escenas/Personajes/Chipita.tscn" id="6_ai0lc"]
[ext_resource type="PackedScene" uid="uid://dkn8gxfmy5tm6" path="res://Escenas/UserUI/label_dialogue.tscn" id="6_dp2kd"]
[ext_resource type="PackedScene" uid="uid://dhfemvdo74v03" path="res://Escenas/UserUI/party_sumary_ui.tscn" id="9_nkr7g"]
[ext_resource type="PackedScene" uid="uid://brmhxiplj1nln" path="res://Escenas/UserUI/party_character_slot.tscn" id="10_pjnot"]
[ext_resource type="PackedScene" uid="uid://dioro2qfasopc" path="res://Escenas/Objetos/cubiletrero.tscn" id="10_sf4ds"]
[ext_resource type="PackedScene" uid="uid://32tsodv1b27v" path="res://Escenas/UserUI/inventory_ui2.tscn" id="10_x6jwr"]
[ext_resource type="PackedScene" uid="uid://bodo6o8l2sybh" path="res://Escenas/NPCs Auromora/NPC_maya.tscn" id="11_5x380"]
[ext_resource type="PackedScene" uid="uid://b7c56in6tdjsb" path="res://Escenas/Sonido/sonido_ambiental.tscn" id="11_cqkqw"]
[ext_resource type="PackedScene" uid="uid://cvaq71wq2o5yd" path="res://Escenas/UserUI/main_menu_ui.tscn" id="11_lotfc"]
[ext_resource type="PackedScene" uid="uid://uu6q5hosvtu6" path="res://Escenas/UserUI/opciones_ui.tscn" id="12_lotfc"]
[ext_resource type="PackedScene" uid="uid://cakpnjvtgcato" path="res://Escenas/UserUI/estadisticas_ui.tscn" id="13_2nfd4"]
[ext_resource type="PackedScene" uid="uid://7v22g42l4rov" path="res://Models/Cofre.tscn" id="13_16hig"]
[ext_resource type="PackedScene" uid="uid://cpkvk4qac61ng" path="res://Escenas/NPCs Auromora/anciano_1.tscn" id="13_wukj4"]
[ext_resource type="Script" uid="uid://csjccrhj5wnx7" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="14_al3wf"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="14_dex0v"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="15_6tl7n"]
[ext_resource type="Script" uid="uid://cq8p0ssv6jhso" path="res://Scripts/para_nodo/world.gd" id="17_v6mq6"]
[ext_resource type="PackedScene" uid="uid://cdarkppno1gsm" path="res://Escenas/NPCs Auromora/NPC_sigrid.tscn" id="18_7vly3"]
[ext_resource type="Script" uid="uid://bve60yr50c5sg" path="res://Scripts/Mundo/Interactuables/ChestCommon.gd" id="18_mo6bs"]
[ext_resource type="PackedScene" uid="uid://xlhfyi07xx0d" path="res://Escenas/NPCs Auromora/NPC_amanda.tscn" id="19_x6jwr"]

[sub_resource type="NavigationMesh" id="NavigationMesh_metkf"]
vertices = PackedVector3Array(-1.58781, 0.414183, -1.58328, -1.58781, 0.414183, 1.66672, 1.66219, 0.414183, 1.66672, 1.66219, 0.414183, -1.58328)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="BoxMesh" id="BoxMesh_ahksf"]

[sub_resource type="NavigationMesh" id="NavigationMesh_p4rn7"]
vertices = PackedVector3Array(-17.6035, 0.485075, -1.5704403, -19.8535, 0.235075, -1.3204403, -19.8535, 0.235075, 1.1795597, -12.6035, 0.235075, 1.1795597, -12.6035, 0.235075, -1.3204403, -15.3535, 0.485075, -1.5704403, -15.3535, 2.485075, -6.5704403, -17.6035, 2.485075, -10.82044, -17.6035, 2.485075, -6.8561544, -12.8535, 2.485075, -6.8204403, -12.8535, 2.485075, -10.82044, -10.1035, 0.235075, 1.1795597, -9.8535, 0.235075, -1.5704403, 9.6465, 0.235075, -10.32044, -9.8535, 0.235075, -10.32044, 9.6465, 0.235075, 1.9295597, -9.8535, 0.235075, 1.9295597)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 5), PackedInt32Array(2, 5, 4), PackedInt32Array(2, 4, 3), PackedInt32Array(7, 6, 8), PackedInt32Array(8, 6, 5), PackedInt32Array(8, 5, 0), PackedInt32Array(9, 6, 10), PackedInt32Array(10, 6, 7), PackedInt32Array(3, 4, 11), PackedInt32Array(11, 4, 12), PackedInt32Array(14, 13, 12), PackedInt32Array(12, 13, 15), PackedInt32Array(11, 12, 16), PackedInt32Array(16, 12, 15)]

[sub_resource type="BoxMesh" id="BoxMesh_buq5b"]

[sub_resource type="BoxShape3D" id="BoxShape3D_7vly3"]

[sub_resource type="BoxMesh" id="BoxMesh_7vly3"]

[sub_resource type="BoxShape3D" id="BoxShape3D_x6jwr"]

[sub_resource type="BoxMesh" id="BoxMesh_x6jwr"]

[sub_resource type="BoxShape3D" id="BoxShape3D_cqkqw"]

[sub_resource type="BoxMesh" id="BoxMesh_cqkqw"]

[sub_resource type="BoxShape3D" id="BoxShape3D_lotfc"]

[sub_resource type="Environment" id="Environment_njs3v"]
background_mode = 1
background_color = Color(7.70092e-07, 0.661235, 0.874662, 1)
ambient_light_source = 2
ambient_light_color = Color(0.686275, 0.917647, 0.988235, 0.372549)

[sub_resource type="Resource" id="Resource_3eirh"]
script = ExtResource("15_6tl7n")

[node name="Nivel1" type="Node"]

[node name="Personajes" type="Node" parent="."]

[node name="Player" parent="Personajes" groups=["equipo"] instance=ExtResource("1_a8vtw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.821939, -1.41913)
speed = 220.0

[node name="MiguelitoNPC" parent="Personajes" instance=ExtResource("2_csbrw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00458488, 0.734952, -4.17453)

[node name="seguidores" type="Node3D" parent="Personajes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1795e-07, 0)

[node name="reservaIA" type="Node3D" parent="Personajes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -14.7377)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Personajes/reservaIA"]
navigation_mesh = SubResource("NavigationMesh_metkf")

[node name="CSGMesh3D" type="CSGMesh3D" parent="Personajes/reservaIA/NavigationRegion3D"]
transform = Transform3D(4.17562, 0, 0, 0, 0.999605, 0, 0, 0, 4.16655, 0, -0.336015, 0)
mesh = SubResource("BoxMesh_ahksf")

[node name="Amanda" parent="Personajes/reservaIA" groups=["equipo"] instance=ExtResource("3_pg8q4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.66418, 0.842737, 0.147961)

[node name="Maya" parent="Personajes/reservaIA" groups=["equipo"] instance=ExtResource("4_i64u6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.97046, 0.935833, -0.997995)
pj_nombre = "Maya"

[node name="Sigrid" parent="Personajes/reservaIA" groups=["equipo"] instance=ExtResource("5_oduvb")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.944998, 0)
pj_nombre = "Sigrid"

[node name="Chipita" parent="Personajes/reservaIA" groups=["equipo"] instance=ExtResource("6_ai0lc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.944555, 0.751558)
pj_nombre = "Chipita"

[node name="Terreno" type="Node" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Terreno"]
navigation_mesh = SubResource("NavigationMesh_p4rn7")

[node name="CSGMesh3D" type="CSGMesh3D" parent="Terreno/NavigationRegion3D"]
transform = Transform3D(20.5017, 0, 0, 0, 1.4777, 0, 0, 0, 13.261513, 0, -0.821309, -4.1043987)
use_collision = true
mesh = SubResource("BoxMesh_buq5b")

[node name="StaticBody3D" type="StaticBody3D" parent="Terreno/NavigationRegion3D/CSGMesh3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Terreno/NavigationRegion3D/CSGMesh3D/StaticBody3D"]
shape = SubResource("BoxShape3D_7vly3")

[node name="CSGMesh3D2" type="CSGMesh3D" parent="Terreno/NavigationRegion3D"]
transform = Transform3D(10.135, 0, 0, 0, 1.00273, 0, 0, 0, 3.23226, -15.286, -0.560589, 0)
use_collision = true
mesh = SubResource("BoxMesh_7vly3")

[node name="StaticBody3D" type="StaticBody3D" parent="Terreno/NavigationRegion3D/CSGMesh3D2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Terreno/NavigationRegion3D/CSGMesh3D2/StaticBody3D"]
shape = SubResource("BoxShape3D_x6jwr")

[node name="CSGMesh3D4" type="CSGMesh3D" parent="Terreno/NavigationRegion3D"]
transform = Transform3D(5.4905, 0, 0, 0, 9.83261, 0, 0, 0, 4.77808, -15.286, -2.84862, -8.9314)
use_collision = true
mesh = SubResource("BoxMesh_x6jwr")

[node name="StaticBody3D" type="StaticBody3D" parent="Terreno/NavigationRegion3D/CSGMesh3D4"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Terreno/NavigationRegion3D/CSGMesh3D4/StaticBody3D"]
shape = SubResource("BoxShape3D_cqkqw")

[node name="CSGMesh3D3" type="CSGMesh3D" parent="Terreno/NavigationRegion3D"]
transform = Transform3D(2.9431393, 0, 0, 0, 0.390699, -2.24287, 0, 0.166526, 5.26215, -16.536951, 0.7559609, -4.012187)
use_collision = true
mesh = SubResource("BoxMesh_cqkqw")

[node name="StaticBody3D" type="StaticBody3D" parent="Terreno/NavigationRegion3D/CSGMesh3D3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Terreno/NavigationRegion3D/CSGMesh3D3/StaticBody3D"]
shape = SubResource("BoxShape3D_lotfc")

[node name="Iluminación" type="Node" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Iluminación"]
transform = Transform3D(0.749845, -0.036311, -0.660617, 0.589674, 0.489476, 0.642416, 0.300029, -0.871261, 0.388442, 0, 6.39511, 0)
shadow_enabled = true

[node name="gameManager" type="Node" parent="."]

[node name="InventoryManager" type="Node" parent="gameManager"]
script = ExtResource("2_5j2cu")

[node name="CanvasLayer" parent="." instance=ExtResource("4_j23ur")]

[node name="PartySumaryUI" parent="CanvasLayer" instance=ExtResource("9_nkr7g")]
offset_bottom = -147.0
character_slot_scene = ExtResource("10_pjnot")

[node name="LabelDialogue" parent="CanvasLayer" instance=ExtResource("6_dp2kd")]
offset_left = -333.0
offset_top = 10.0
offset_right = 118.0
offset_bottom = 188.0
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="InventoryUI" parent="CanvasLayer" instance=ExtResource("10_x6jwr")]

[node name="MainMenuUI" parent="CanvasLayer" instance=ExtResource("11_lotfc")]

[node name="OpcionesUI" parent="CanvasLayer" instance=ExtResource("12_lotfc")]
visible = false

[node name="EstadisticasUI" parent="CanvasLayer" instance=ExtResource("13_2nfd4")]
visible = false

[node name="Entorno" type="Node" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Entorno"]
environment = SubResource("Environment_njs3v")

[node name="Sonido Ambiental" parent="Entorno" instance=ExtResource("11_cqkqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.557146, 0, -3.7993143)

[node name="Interactuable" type="Node" parent="."]

[node name="Cubiletrero" parent="Interactuable" instance=ExtResource("10_sf4ds")]

[node name="Anciano_1" parent="Interactuable" instance=ExtResource("13_wukj4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.609187, 0.810861, -6.32963)

[node name="CofreCommon" parent="Interactuable" instance=ExtResource("13_16hig")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -6.99299, -0.05, -7.78531)
script = ExtResource("18_mo6bs")
world_flag_id = "chest_auromora_1"

[node name="CofreCommon2" parent="Interactuable" instance=ExtResource("13_16hig")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -5.03499, -0.05, -7.78046)
loot_id = "mimic_1"
world_flag_id = "m_chest_1_auromora"

[node name="Maya" parent="Interactuable" instance=ExtResource("11_5x380")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.59051, 0.783088, -6.87827)

[node name="Sigrid_npc" parent="Interactuable" instance=ExtResource("18_7vly3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.489412, 2.867685, -8.371642)

[node name="Amanda_npc" parent="Interactuable" instance=ExtResource("19_x6jwr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.452143, 0.717541, -7.2336907)

[node name="CameraManager" type="Node" parent="."]

[node name="PlayerCamera" type="Camera3D" parent="CameraManager"]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 0.668651, 0.743577, 0, -0.743577, 0.668651, 0, 0.821939, 4.58087)
v_offset = 4.0

[node name="PhantomCameraHost" type="Node" parent="CameraManager/PlayerCamera"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("14_dex0v")

[node name="PhantomCamera3D" type="Node3D" parent="CameraManager" node_paths=PackedStringArray("follow_target")]
transform = Transform3D(1, 0, 0, 0, 0.668651, 0.743577, 0, -0.743577, 0.668651, 0, 0.821939, 4.58087)
top_level = true
script = ExtResource("14_al3wf")
priority = 5
follow_mode = 2
follow_target = NodePath("../../Personajes/Player")
tween_resource = SubResource("Resource_3eirh")
follow_offset = Vector3(0, 0, 6)
follow_damping = true

[node name="World" type="Node" parent="."]
script = ExtResource("17_v6mq6")
